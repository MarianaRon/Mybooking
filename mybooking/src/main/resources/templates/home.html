<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrenvi.com - Домашня сторінка</title>
    <link rel="stylesheet" href="/style.home/home_styleguide.css" />
    <link rel="stylesheet" href="/style.home/home.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .map {
            width: 100%;
            height: 300px;
        }
    </style>
    <script>
        // Створення карти в елементі з класом 'map'
        var map = L.map('map').setView([48.3794, 31.1656], 6); // Координати для центра України

        // Додавання тайлів карти
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
    </script>
</head>
<body>
<header th:insert="sections/header::header" style="background-color: #275271;"></header>
<div class="overlap">
    <img class="backgrnd-header" src="/images/backgr_header.jpg" />
    <div class="text-container">
        <h2 style="color: #f0f0f0">Подорожуй з комфортом</h2>
        <p style="color: #f0f0f0">Найкращі готелі, апартаменти та хостели... і не тільки</p>
    </div>
    <div class="search-block">
        <form action="/search" method="POST">
            <div class="place-field">
                <div class="field-icon">
<!--                    <label for="city">Куди вирушаєте?</label>-->
                    <select name="city" id="city">
                        <option value="">Куди вирушаєте?</option>
                        <!-- Додати список міст -->
                        <option th:each="city : ${cities}" th:value="${city.id}" th:text="${city.name} + ', ' + ${city.region}"></option>
                    </select>
                </div>
            </div>
            <div class="calendar-picker">
                <label for="date" style="color: #f0f0f0;">Коли вирушаєте?</label>
                <input type="date" id="date" name="date">
            </div>
            <div class="guest-picker">
                <label for="guests" style="color: #f0f0f0;">Кількість гостей</label>
                <input type="number" id="guests" name="guests" min="1" value="1">
            </div>
            <button type="submit" class="button-2">Шукати</button>
        </form>
    </div>
</div>

        <h2 style="margin-top: 50px">Або виберіть помешкання на мапі</h2>
            <div id="map" class="map" style="margin-top: 20px"></div>
        <h2 class="" th:text="${welcomeMessage}"></h2>

<h2>Міста України</h2>
<div id="cityCarousel" class="carousel slide" data-ride="carousel">
<div class="carousel-inner">
<!--                        <div th:each="city, stat : ${cities}" th:classappend="carousel-item ${stat.index == 0} ? 'active' : ''">-->

                            <div th:each="city, stat : ${cities}" th:classappend="'carousel-item ' + (${stat.index == 0} ? 'active' : '')">
                            <img th:if="${city.photoBytes != null}" th:src="@{/cities/photo/{id}(id=${city.id})}" class="d-block w-100" alt="Фото міста">
                            <img th:if="${city.photoBytes == null}" th:src="${city.photoUrl}" class="d-block w-100" alt="Фото міста">

                            <div class="carousel-caption d-none d-md-block">
                                <h5 th:text="${city.name}"></h5>
                                <p th:text="${city.region}"></p>
                            </div>
</div>
</div>
<a class="carousel-control-prev" href="#cityCarousel" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
</a>
<a class="carousel-control-next" href="#cityCarousel" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
</a>
</div>

<p>Виберіть, у якому місті України ви хочете відпочити</p>


<!--&lt;!&ndash; Секція newsletter &ndash;&gt;-->
<!--<div class="newsletter">-->
<!--    <div class="overlap-group">-->
<!--        <img src="/images/newsletter.jpg" style="width: 100%; height: auto;" />-->
<!--        <p class="text-wrapper-6">-->
<!--            Залишайтеся в курсі нових місць для відпочинку-->
<!--        </p>-->
<!--        <div class="button-blue" style="margin-top: -70px">-->
<!--            <button class="button-2">Підписатися на newsletter</button>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    // Обробка каруселі міст-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const btnPrev = document.querySelector(".carousel-control-prev");-->
<!--        const btnNext = document.querySelector(".carousel-control-next");-->
<!--        const items = document.querySelectorAll(".carousel-item");-->
<!--        const itemsPerView = 3; // Кількість міст на екрані-->
<!--        let currentIndex = 0;-->

<!--        function showImages(startIndex) {-->
<!--            items.forEach(item => item.classList.remove("active"));-->
<!--            for (let i = 0; i < itemsPerView; i++) {-->
<!--                let index = (startIndex + i) % items.length; // Прокручування по кругу-->
<!--                items[index].classList.add("active");-->
<!--            }-->
<!--        }-->

<!--        function prevImage() {-->
<!--            currentIndex&#45;&#45;;-->
<!--            if (currentIndex < 0) {-->
<!--                currentIndex = items.length - 1;-->
<!--            }-->
<!--            showImages(currentIndex);-->
<!--        }-->

<!--        function nextImage() {-->
<!--            currentIndex++;-->
<!--            if (currentIndex >= items.length) {-->
<!--                currentIndex = 0;-->
<!--            }-->
<!--            showImages(currentIndex);-->
<!--        }-->

<!--        // Спочатку показуємо перші три міста-->
<!--        showImages(currentIndex);-->

<!--        // Обробники подій для кнопок-->
<!--        btnPrev.addEventListener("click", prevImage);-->
<!--        btnNext.addEventListener("click", nextImage);-->
<!--    });-->
<!--</script>-->



<div class="newsletter" >
    <div class="overlap-group">
        <img src="/images/newsletter.jpg" style="width: 100%; height: auto;" />
        <p class="text-wrapper-6">
            Залишайтеся в курсі нових місць для відпочинку
        </p>
        <div class="button-blue" style="margin-top: -70px" >
            <button class="button-2" >Підписатися на newsletter</button>
        </div>
    </div>
</div>
        <!-- Admin Page Link -->
        <div th:if="${session.currentUser != null and session.currentUser.email == 'okobilska@gmail.com'}">
            <a class="nav-link" href="/admin_page">Сторінка адміністратора</a>
        </div>



<h2>Спробуйте найпопулярніші напрямки для подорожі</h2>
<p>Популярні напрямки для подорожі</p>
<!--<div class="second_carousel">-->
<!--    <div id="secondCarousel" class="carousel slide" data-ride="carousel">-->
<!--        <ol class="carousel-indicators">-->
<!--            <li data-target="#secondCarousel" data-slide-to="0" class="active"></li>-->
<!--            <li data-target="#secondCarousel" data-slide-to="1"></li>-->
<!--            <li data-target="#secondCarousel" data-slide-to="2"></li>-->
<!--        </ol>-->
<!--        <div class="carousel-inner">-->
<!--            <div class="carousel-item active">-->
<!--                <img src="city1.jpg" class="d-block w-100" alt="City 1">-->
<!--                <div class="carousel-caption">-->
<!--                    <h5>Місто 1</h5>-->
<!--                    <p>Опис міста 1</p>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="carousel-item">-->
<!--                <img src="city2.jpg" class="d-block w-100" alt="City 2">-->
<!--                <div class="carousel-caption">-->
<!--                    <h5>Місто 2</h5>-->
<!--                    <p>Опис міста 2</p>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="carousel-item">-->
<!--                <img src="city3.jpg" class="d-block w-100" alt="City 3">-->
<!--                <div class="carousel-caption">-->
<!--                    <h5>Місто 3</h5>-->
<!--                    <p>Опис міста 3</p>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--        <a class="carousel-control-prev second-slider-button" href="#secondCarousel" role="button" data-slide="prev">-->
<!--            <span class="carousel-control-prev-icon" aria-hidden="true"></span>-->
<!--            <span class="sr-only">Попередній</span>-->
<!--        </a>-->
<!--        <a class="carousel-control-next second-slider-button" href="#secondCarousel" role="button" data-slide="next">-->
<!--            <span class="carousel-control-next-icon" aria-hidden="true"></span>-->
<!--            <span class="sr-only">Наступний</span>-->
<!--        </a>-->
<!--    </div>-->
<!--</div>-->


<h2>Найпопулярніші готелі України</h2>
<p>Забронюйте наші найпопулярніші унікальні помешкання</p>

<!--для каруселі МІСТА -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script>
    // Створення карти в елементі з ID 'map'
    var map = L.map('map').setView([48.3794, 31.1656], 6); // Координати для центра України

    // Додавання тайлів карти
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    document.addEventListener("DOMContentLoaded", function() {
        const btnPrev = document.querySelector(".carousel-control-prev");
        const btnNext = document.querySelector(".carousel-control-next");
        const items = document.querySelectorAll(".carousel-item");
        const itemsPerView = 3; // Кількість міст на екрані
        let currentIndex = 0;

        function showImages(startIndex) {
            items.forEach(item => item.classList.remove("active"));
            // Очищаємо "active" у всіх елементах
            for (let i = 0; i < itemsPerView; i++) {
                let index = (startIndex + i) % items.length; // Прокручування по кругу
                items[index].classList.add("active");
            }
        }

        function prevImage() {
            currentIndex--;
            if (currentIndex < 0) {
                currentIndex = items.length - 1;
            }
            showImages(currentIndex);
        }

        function nextImage() {
            currentIndex++;
            if (currentIndex >= items.length) {
                currentIndex = 0;
            }
            showImages(currentIndex);
        }

        // Спочатку показуємо перші три міста
        showImages(currentIndex);

        // Обробники подій для кнопок
        btnPrev.addEventListener("click", prevImage);
        btnNext.addEventListener("click", nextImage);
    });

</script>
<footer th:insert="sections/footer::footer" style="background-color: #275271;"></footer>
</body>
</html>